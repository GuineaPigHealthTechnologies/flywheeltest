(function(){"use strict";jQuery(function(a){var b,c,d,e;if("comment"===window.pagenow||"product_page_reviews"===window.pagenow)return e=null!=(d=window.wc_product_reviews_pro_admin_reviews)?d:{},b=a("#wc-product-reviews-pro-flags"),c=function(c,d,f){var g;return g={action:"wc_product_reviews_pro_handle_contribution_flag",security:e.handle_contribution_flag_nonce,handling:c,flags:f,contribution:d},a.post(e.ajax_url,g,function(d){var e,g,h,i,j;if(d.success){for(j=[],h=0,i=f.length;h<i;h++)g=f[h],e=b.find("#flag-"+g),"delete"===c?e.fadeOut("400",function(){if(a(this).remove(),1===b.find("tbody tr").length)return a("tr.no-flags").show()}):"resolve"===c&&e.find("button.resolve").fadeOut("400",function(){return e.removeClass("unresolved").addClass("resolved"),a(this).remove()}),j.push(a("#wc-product-reviews-pro-stats").find("tr.active-flags td").html(d.data));return j}return console.log(d)})},b.find("button").not(".action").on("click",function(b){var d;if(b.preventDefault(),d=a(this).data("action"),"delete"!==d||confirm(e.i18n.confirm_delete_flag))return c(d,a(this).data("contribution-id"),[a(this).data("flag-id")])}),b.find("button.action").on("click",function(d){var f,g,h;if(d.preventDefault(),g=a(this).data("contribution-id"),f=a(this).prev("select").val(),h=b.find("input.select-flag-id:checked").map(function(){return a(this).val()}).get(),h.length>0){if("delete"===f&&!confirm(e.i18n.confirm_delete_flags))return;return c(f,g,h),location.reload()}}),a("#wc-product-reviews-pro-attachment a.remove-attachment").on("click",function(b){var c;if(b.preventDefault(),confirm(e.i18n.confirm_remove_attachment))return c=a(this).data("comment-id"),a("#wc-product-reviews-pro-attachment .inside .feedback").remove(),a.ajax({type:"POST",url:e.ajax_url,data:{action:"wc_product_reviews_pro_remove_contribution_attachment",security:e.nonce,comment_id:c},success:function(b){return b.data&&b.data.message||a("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+e.i18n.error_removing_attachment+"</p>"),b.success?a("#wc-product-reviews-pro-attachment .inside").empty().prepend('<p class="feedback">'+b.data.message+"</p>"):a("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+b.data.message+"</p>")}})})})}).call(this);